(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{103:function(t,e,c){},107:function(t,e,c){},108:function(t,e,c){"use strict";c.r(e);var r=c(0),n=c.n(r),a=c(24),o=c.n(a),u=c(28),s=c(15),i=c(60),b=c(9),l={home:"/",contacts:"/contacts",login:"/login",register:"/register"},j=c(14),d=c(113),f=c(1);function O(){var t=Object(s.c)(j.c.isAuthenticated);return Object(f.jsxs)(d.a,{className:"mr-auto",children:[Object(f.jsx)(d.a.Link,{href:l.home,children:"Home"}),t&&Object(f.jsx)(d.a.Link,{href:l.contacts,children:"Contacts"})]})}var h=c.p+"static/media/default-avatar.fb653606.png",g=c(112),p=c(110),C=c(111);c(98);function x(){var t=Object(s.b)(),e=Object(s.c)(j.c.getUserEmail);return Object(f.jsxs)(g.a.Collapse,{className:"justify-content-end",children:[Object(f.jsx)(p.a,{src:h,alt:"Avatar",width:"32",roundedCircle:!0,className:"user-item"}),Object(f.jsx)(g.a.Text,{className:"user-item",children:e}),Object(f.jsx)(C.a,{variant:"outline-info",type:"button",onClick:function(){t(j.a.logOut())},children:"Logout"})]})}var v=function(){return Object(f.jsxs)(d.a,{children:[Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(d.a.Link,{href:l.register,children:"Register"})}),Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(d.a.Link,{href:l.login,children:"Login"})})]})};function m(){var t=Object(s.c)(j.c.isAuthenticated);return Object(f.jsx)("header",{children:Object(f.jsxs)(g.a,{bg:"dark",variant:"dark",children:[Object(f.jsx)(O,{}),t?Object(f.jsx)(x,{}):Object(f.jsx)(v,{})]})})}c(99);var E=function(t){var e=t.children;return Object(f.jsx)("div",{className:"Section",children:Object(f.jsx)("div",{children:e})})},k=c(27),S=c(34);function y(t){var e=t.children,c=t.redirectTo,r=Object(S.a)(t,["children","redirectTo"]),n=Object(s.c)(j.c.isAuthenticated);return Object(f.jsx)(b.b,Object(k.a)(Object(k.a)({},r),{},{children:n?e:Object(f.jsx)(b.a,{to:c})}))}function R(t){var e=t.children,c=t.redirectTo,r=Object(S.a)(t,["children","redirectTo"]),n=Object(s.c)(j.c.isAuthenticated);return Object(f.jsx)(b.b,Object(k.a)(Object(k.a)({},r),{},{children:n&&r.restricted?Object(f.jsx)(b.a,{to:c}):e}))}c(103);var q=Object(r.lazy)((function(){return c.e(1).then(c.bind(null,121))})),w=Object(r.lazy)((function(){return c.e(4).then(c.bind(null,122))})),U=Object(r.lazy)((function(){return c.e(2).then(c.bind(null,123))})),A=Object(r.lazy)((function(){return c.e(0).then(c.bind(null,120))}));function L(){var t=Object(s.b)();return Object(r.useEffect)((function(){t(j.a.getCurrentUser())}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m,{}),Object(f.jsx)(E,{children:Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)("p",{children:"Loading..."}),children:Object(f.jsxs)(b.d,{children:[Object(f.jsx)(b.b,{exact:!0,path:l.home,children:Object(f.jsx)(q,{})}),Object(f.jsx)(R,{restricted:!0,redirectTo:l.contacts,path:l.register,children:Object(f.jsx)(w,{})}),Object(f.jsx)(R,{restricted:!0,redirectTo:l.contacts,path:l.login,children:Object(f.jsx)(U,{})}),Object(f.jsx)(y,{redirectTo:l.login,path:l.contacts,component:A})]})})})]})}var T=c(36),z=c(3),F=c(47),N=c(63),I=c.n(N),B=c(23),J=c(64),H=c.n(J),M=[].concat(Object(T.a)(Object(z.d)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),[I.a]),V={key:"auth",storage:H.a,whitelist:["token"]},D=Object(z.a)({reducer:{contacts:F.c,auth:Object(B.g)(V,j.b)},middleware:M,devTools:!1}),G={store:D,persistor:Object(B.h)(D)},K=(c(106),c(107),G.store),P=G.persistor;o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(s.a,{store:K,children:Object(f.jsx)(i.a,{loading:null,persistor:P,children:Object(f.jsx)(u.a,{children:Object(f.jsx)(L,{})})})})}),document.getElementById("root"))},11:function(t,e,c){"use strict";var r=c(3),n={fetchContactRequest:Object(r.b)("contacts/fetchContactRequest"),fetchContactSuccess:Object(r.b)("contacts/fetchContactSuccess"),fetchContactError:Object(r.b)("contacts/fetchContactError"),addContactRequest:Object(r.b)("contacts/addContactRequest"),addContactSuccess:Object(r.b)("contacts/addContactSuccess"),addContactError:Object(r.b)("contacts/addContactError"),deleteContactRequest:Object(r.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(r.b)("contacts/deleteContactSuccess"),deleteContactError:Object(r.b)("contacts/deleteContactError"),changeFilter:Object(r.b)("contacts/changeFilter")};e.a=n},14:function(t,e,c){"use strict";c.d(e,"a",(function(){return h})),c.d(e,"b",(function(){return L})),c.d(e,"c",(function(){return T}));var r=c(3),n={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),loginRequest:Object(r.b)("auth/loginRequest"),loginSuccess:Object(r.b)("auth/loginSuccess"),loginError:Object(r.b)("auth/loginError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")},a=c(22),o=c.n(a),u=c(31),s=c(19),i=c.n(s);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var b,l,j,d,f=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},O=function(){i.a.defaults.headers.common.Authorization=""},h={register:function(t){return function(){var e=Object(u.a)(o.a.mark((function e(c){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n.registerRequest()),e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:r=e.sent,f(r.data.token),c(n.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(n.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(u.a)(o.a.mark((function e(c){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n.loginRequest()),e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:r=e.sent,f(r.data.token),c(n.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(n.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(n.logoutRequest()),t.prev=1,t.next=4,i.a.post("/users/logout");case 4:O(),e(n.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(n.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(u.a)(o.a.mark((function t(e,c){var r,a,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return f(a),e(n.getCurrentUserRequest()),t.prev=5,t.next=8,i.a.get("/users/current");case 8:u=t.sent,e(n.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(n.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,c){return t.apply(this,arguments)}}()}},g=c(5),p=c(12),C=n.registerSuccess,x=n.registerError,v=n.loginSuccess,m=n.loginError,E=n.logoutSuccess,k=n.logoutError,S=n.getCurrentUserSuccess,y=n.getCurrentUserError,R={name:null,email:null},q=Object(r.c)(R,(b={},Object(g.a)(b,C,(function(t,e){return e.payload.user})),Object(g.a)(b,v,(function(t,e){return e.payload.user})),Object(g.a)(b,E,(function(){return R})),Object(g.a)(b,S,(function(t,e){return e.payload})),b)),w=Object(r.c)(null,(l={},Object(g.a)(l,C,(function(t,e){return e.payload.token})),Object(g.a)(l,v,(function(t,e){return e.payload.token})),Object(g.a)(l,E,(function(){return null})),l)),U=Object(r.c)(null,(j={},Object(g.a)(j,x,(function(t,e){return e.payload})),Object(g.a)(j,m,(function(t,e){return e.payload})),Object(g.a)(j,k,(function(t,e){return e.payload})),Object(g.a)(j,y,(function(t,e){return e.payload})),j)),A=Object(r.c)(!1,(d={},Object(g.a)(d,C,(function(){return!0})),Object(g.a)(d,v,(function(){return!0})),Object(g.a)(d,S,(function(){return!0})),Object(g.a)(d,x,(function(){return!1})),Object(g.a)(d,m,(function(){return!1})),Object(g.a)(d,y,(function(){return!1})),Object(g.a)(d,E,(function(){return!1})),d)),L=Object(p.c)({user:q,isAuthenticated:A,token:w,error:U}),T={isAuthenticated:function(t){return t.auth.isAuthenticated},getUserEmail:function(t){return t.auth.user.email}}},47:function(t,e,c){"use strict";c.d(e,"a",(function(){return a.a})),c.d(e,"b",(function(){return o.a})),c.d(e,"c",(function(){return v})),c.d(e,"d",(function(){return k}));var r,n,a=c(11),o=c(48),u=c(5),s=c(36),i=c(12),b=c(3),l=a.a.fetchContactSuccess,j=a.a.fetchContactError,d=a.a.addContactSuccess,f=a.a.addContactError,O=a.a.deleteContactSuccess,h=a.a.deleteContactError,g=a.a.changeFilter,p=Object(b.c)([],(r={},Object(u.a)(r,l,(function(t,e){return e.payload})),Object(u.a)(r,d,(function(t,e){var c=e.payload;return[].concat(Object(s.a)(t),[c])})),Object(u.a)(r,O,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),r)),C=Object(b.c)("",Object(u.a)({},g,(function(t,e){return e.payload}))),x=Object(b.c)(null,(n={},Object(u.a)(n,j,(function(t,e){return e.payload})),Object(u.a)(n,f,(function(t,e){return e.payload})),Object(u.a)(n,h,(function(t,e){return e.payload})),n)),v=Object(i.c)({items:p,filter:C,error:x}),m=c(32),E=function(t){return t.contacts.filter},k={getFilter:E,getVisibleContacts:Object(m.a)([function(t){return t.contacts.items},E],(function(t,e){var c=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(c)}))}))}},48:function(t,e,c){"use strict";var r=c(19),n=c.n(r),a=c(11),o={addContact:function(t,e){return function(c){var r={name:t,number:e};c(a.a.addContactRequest()),n.a.post("/contacts",r).then((function(t){var e=t.data;return c(a.a.addContactSuccess(e))})).catch((function(t){return c(a.a.addContactError(t.message))}))}},deleteContact:function(t){return function(e){e(a.a.deleteContactRequest()),n.a.delete("/contacts/".concat(t)).then((function(){return e(a.a.deleteContactSuccess(t))})).catch((function(t){return e(a.a.deleteContactError(t.message))}))}},fetchContacts:function(){return function(t){t(a.a.fetchContactRequest()),n.a.get("/contacts").then((function(e){var c=e.data;return t(a.a.fetchContactSuccess(c))})).catch((function(e){return t(a.a.fetchContactError(e.message))}))}}};e.a=o},98:function(t,e,c){},99:function(t,e,c){}},[[108,5,6]]]);
//# sourceMappingURL=main.54bfc4bf.chunk.js.map